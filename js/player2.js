!function(t){function i(n){if(e[n])return e[n].exports;var o=e[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}var e={};return i.m=t,i.c=e,i.p="",i(0)}([function(t,i,e){var n;/*!
	 *  Howler.js Audio Player Demo
	 *  howlerjs.com
	 *
	 *  (c) 2013-2016, James Simpson of GoldFire Studios
	 *  goldfirestudios.com
	 *
	 *  MIT License
	 */
!function(){function o(t){t=t||{},this.phase=0,this.run=!1,this.ratio=t.ratio||window.devicePixelRatio||1,this.width=this.ratio*(t.width||320),this.width_2=this.width/2,this.width_4=this.width/4,this.height=this.ratio*(t.height||100),this.height_2=this.height/2,this.MAX=this.height_2-4,this.amplitude=t.amplitude||1,this.speed=t.speed||.2,this.frequency=t.frequency||6,this.color=function(t){var i=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(i,function(t,i,e,n){return i+i+e+e+n+n});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?parseInt(e[1],16).toString()+","+parseInt(e[2],16).toString()+","+parseInt(e[3],16).toString():null}(t.color||"#fff")||"255,255,255",this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,t.cover?this.canvas.style.width=this.canvas.style.height="45%":(this.canvas.style.width=this.width/this.ratio+"px",this.canvas.style.height=this.height/this.ratio+"px"),this.container=t.container||document.body,this.container.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),t.autostart&&this.start()}return o.prototype._GATF_cache={},o.prototype._globAttFunc=function(t){return null==o.prototype._GATF_cache[t]&&(o.prototype._GATF_cache[t]=Math.pow(4/(4+Math.pow(t,4)),4)),o.prototype._GATF_cache[t]},o.prototype._xpos=function(t){return this.width_2+t*this.width_4},o.prototype._ypos=function(t,i){var e=this.MAX*this.amplitude/i;return this.height_2+this._globAttFunc(t)*e*Math.sin(this.frequency*t-this.phase)},o.prototype._drawLine=function(t,i,e){this.ctx.moveTo(0,0),this.ctx.beginPath(),this.ctx.strokeStyle=i,this.ctx.lineWidth=e||1;for(var n=-2;(n+=.01)<=2;){var o=this._ypos(n,t);Math.abs(n)>=1.9&&(o=this.height_2),this.ctx.lineTo(this._xpos(n),o)}this.ctx.stroke()},o.prototype._clear=function(){this.ctx.globalCompositeOperation="destination-out",this.ctx.fillRect(0,0,this.width,this.height),this.ctx.globalCompositeOperation="source-over"},o.prototype._draw=function(){if(this.run!==!1)return this.phase=(this.phase+Math.PI*this.speed)%(2*Math.PI),this._clear(),this._drawLine(-2,"rgba("+this.color+",0.1)"),this._drawLine(-6,"rgba("+this.color+",0.2)"),this._drawLine(4,"rgba("+this.color+",0.4)"),this._drawLine(2,"rgba("+this.color+",0.6)"),this._drawLine(1,"rgba("+this.color+",1)",1.5),window.requestAnimationFrame?void requestAnimationFrame(this._draw.bind(this)):void setTimeout(this._draw.bind(this),20)},o.prototype.start=function(){this.phase=0,this.run=!0,this._draw()},o.prototype.stop=function(){this.phase=0,this.run=!1},o.prototype.setSpeed=function(t){this.speed=t},o.prototype.setNoise=o.prototype.setAmplitude=function(t){this.amplitude=Math.max(Math.min(t,1),0)},n=function(){return o}.call(i,e,i,t),void!(void 0!==n&&(t.exports=n))}();var o=["track","timer","duration","playBtn","pauseBtn","prevBtn","nextBtn","playlistBtn","volumeBtn","progress","bar","wave","loading","playlist","list","volume","barEmpty","barFull","sliderBtn"];o.forEach(function(t){window[t]=document.getElementById(t)});var s=function(t){this.playlist=t,this.index=0,track.innerHTML="1. "+t[0].title,t.forEach(function(i){var e=document.createElement("div");e.className="list-song",e.innerHTML=i.title,e.onclick=function(){a.skipTo(t.indexOf(i))},list.appendChild(e)})};s.prototype={play:function(t){var i,e=this;t="number"==typeof t?t:e.index;var n=e.playlist[t];i=n.howl?n.howl:n.howl=new Howl({src:["./audio/"+n.file+".mp3"],html5:!0,onplay:function(){duration.innerHTML=e.formatTime(Math.round(i.duration())),requestAnimationFrame(e.step.bind(e)),r.container.style.display="block",bar.style.display="none",pauseBtn.style.display="block"},onload:function(){r.container.style.display="block",bar.style.display="none",loading.style.display="none"},onend:function(){r.container.style.display="none",bar.style.display="block",e.skip("right")},onpause:function(){r.container.style.display="none",bar.style.display="block"},onstop:function(){r.container.style.display="none",bar.style.display="block"}}),i.play(),track.innerHTML=t+1+". "+n.title,"loaded"===i.state()?(playBtn.style.display="none",pauseBtn.style.display="block"):(loading.style.display="block",playBtn.style.display="none",pauseBtn.style.display="none"),e.index=t},pause:function(){var t=this,i=t.playlist[t.index].howl;i.pause(),playBtn.style.display="block",pauseBtn.style.display="none"},skip:function(t){var i=this,e=0;"prev"===t?(e=i.index-1,e<0&&(e=i.playlist.length-1)):(e=i.index+1,e>=i.playlist.length&&(e=0)),i.skipTo(e)},skipTo:function(t){var i=this;i.playlist[i.index].howl&&i.playlist[i.index].howl.stop(),progress.style.width="0%",i.play(t)},volume:function(t){var i=this,e=i.playlist[i.index].howl;e.volume(t);var n=90*t/100;barFull.style.width=100*n+"%",sliderBtn.style.left=window.innerWidth*n+.05*window.innerWidth-800+"px"},seek:function(t){var i=this,e=i.playlist[i.index].howl;e.playing()&&e.seek(e.duration()*t)},step:function(){var t=this,i=t.playlist[t.index].howl,e=i.seek()||0;timer.innerHTML=t.formatTime(Math.round(e)),progress.style.width=(e/i.duration()*100||0)+"%",i.playing()&&requestAnimationFrame(t.step.bind(t))},togglePlaylist:function(){var t="block"===playlist.style.display?"none":"block";setTimeout(function(){playlist.style.display=t},"block"===t?0:500),playlist.className="block"===t?"fadein":"fadeout"},toggleVolume:function(){var t="block"===volume.style.display?"none":"block";setTimeout(function(){volume.style.display=t},"block"===t?0:500),volume.className="block"===t?"fadein":"fadeout"},formatTime:function(t){var i=Math.floor(t/60)||0,e=t-60*i||0;return i+":"+(e<10?"0":"")+e}};var a=new s([{title:"钢琴曲 - 潘多拉之心",file:"钢琴曲 - 潘多拉之心",howl:null},{title:"80s Vibe",file:"80s_vibe",howl:null},{title:"钢琴曲 - 雪的梦幻",file:"钢琴曲 - 雪的梦幻",howl:null}]);playBtn.addEventListener("click",function(){a.play()}),pauseBtn.addEventListener("click",function(){a.pause()}),prevBtn.addEventListener("click",function(){a.skip("prev")}),nextBtn.addEventListener("click",function(){a.skip("next")}),waveform.addEventListener("click",function(t){a.seek(t.clientX/window.innerWidth)}),playlistBtn.addEventListener("click",function(){a.togglePlaylist()}),playlist.addEventListener("click",function(){a.togglePlaylist()}),volumeBtn.addEventListener("click",function(){a.toggleVolume()}),volume.addEventListener("click",function(){a.toggleVolume()}),barEmpty.addEventListener("click",function(t){var i=t.layerX/parseFloat(barEmpty.scrollWidth);a.volume(i)}),sliderBtn.addEventListener("mousedown",function(){window.sliderDown=!0}),sliderBtn.addEventListener("touchstart",function(){window.sliderDown=!0}),volume.addEventListener("mouseup",function(){window.sliderDown=!1}),volume.addEventListener("touchend",function(){window.sliderDown=!1});var l=function(t){if(window.sliderDown){var i=t.clientX||t.touches[0].clientX,e=.05*window.innerWidth,n=i-e,o=Math.min(1,Math.max(0,n/parseFloat(barEmpty.scrollWidth)));a.volume(o)}};volume.addEventListener("mousemove",l),volume.addEventListener("touchmove",l);var r=new SiriWave({container:waveform,width:window.innerWidth,height:.3*window.innerHeight,cover:!0,speed:.03,amplitude:.7,frequency:2});r.start();var h=function(){var t=.3*window.innerHeight,i=window.innerWidth;r.height=t,r.height_2=t/2,r.MAX=r.height_2-4,r.width=i,r.width_2=i/2,r.width_4=i/4,r.canvas.height=t,r.canvas.width=i,r.container.style.margin=-(t/2)+"px auto";var e=a.playlist[a.index].howl;if(e){var n=e.volume(),o=.9*n;sliderBtn.style.left=window.innerWidth*o+.05*window.innerWidth-15+"px"}};window.addEventListener("resize",h),h()}]);